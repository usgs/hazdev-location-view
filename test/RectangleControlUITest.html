<!doctype html>
<html lang="en">
<head>
  <title>UI Test for Rectangle Control</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <style>
    html, body, .map {
      display:block;
      width:100%;
      height:100%;
      margin:0;
      padding:0;
    }
  </style>
  <link rel="stylesheet" href="/leaflet/dist/leaflet.css"/>
  <link rel="stylesheet" href="LeafletShim.css"/>
  <link rel="stylesheet" href="RectangleControl.css"/>
  <link rel="stylesheet" href="RectangleView.css"/>
</head>
<body>
  <div class="map"></div>

  <script src="requirejs/require.js"></script>
  <script>
    require.config({
      baseUrl: '.',
      paths: {
        util: '/hazdev-webutils/src/util',
        mvc: '/hazdev-webutils/src/mvc',
        leaflet: '/leaflet/dist/leaflet-src'
      },
      shim: {
        leaflet: {
          exports: 'L'
        }
      }
    });

    require([
      'leaflet',
      'RectangleControl',
      'RectangleModel'
    ], function (
      L,
      RectangleControl,
      RectangleModel
    ) {
      'use strict';

      var model = RectangleModel();
      var map = L.map(document.querySelector('.map'), {
        center: [40.0, -105.0],
        zoom: 3
      });
      var rect = new RectangleControl({model: model});
      var base = L.tileLayer('http://server.arcgisonline.com' +
          '/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}');

      model.on('change', function () {
        console.log(model.get());
      });

      map.addLayer(base);
      map.addControl(rect);
    });
  </script>
</body>
</html>